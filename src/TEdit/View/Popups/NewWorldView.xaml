<ui:FluentWindow x:Class="TEdit.View.Popups.NewWorldView"
        x:Name="NewWorldWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:ui="http://schemas.lepo.co/wpfui/2022/xaml"
        xmlns:tedit="clr-namespace:TEdit.UI.Xaml"
        xmlns:p="clr-namespace:TEdit.Properties"
        Title="New World"
        WindowStartupLocation="CenterOwner"
        ExtendsContentIntoTitleBar="True"
        WindowBackdropType="Mica"
        Icon="/TEdit;component/Images/tedit.ico"
        SizeToContent="Height"
        Width="380"
        MinWidth="380"
        MaxHeight="700">

    <Grid Background="{DynamicResource SidebarBackgroundBrush}">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>      <!-- Title -->
            <RowDefinition Height="Auto"/>      <!-- World Properties -->
            <RowDefinition Height="Auto"/>      <!-- World Generation (Expander) -->
            <RowDefinition Height="Auto"/>      <!-- Bottom Buttons -->
        </Grid.RowDefinitions>

        <!-- Title -->
        <TextBlock Grid.Row="0"
                   Text="Create New World"
                   Style="{DynamicResource SidebarPanelTitle}"/>

        <!-- World Properties Section -->
        <StackPanel Grid.Row="1" Margin="8,0,8,8">
            <TextBlock Text="World Properties"
                       Margin="0,0,0,8"
                       FontWeight="SemiBold"
                       Foreground="{DynamicResource TextFillColorPrimaryBrush}"/>

            <tedit:AutoGrid HorizontalAlignment="Stretch" VerticalAlignment="Top">
                <tedit:AutoGrid.ColumnDefinitions>
                    <ColumnDefinition Width="Auto"/>
                    <ColumnDefinition Width="*"/>
                </tedit:AutoGrid.ColumnDefinitions>

                <TextBlock Text="World Name"
                           HorizontalAlignment="Right"
                           Margin="0,0,8,0"
                           Foreground="{DynamicResource TextFillColorPrimaryBrush}"/>
                <TextBox Text="{Binding Title, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" Margin="0,2"/>

                <TextBlock Text="World Id (Seed)"
                           HorizontalAlignment="Right"
                           Margin="0,0,8,0"
                           Foreground="{DynamicResource TextFillColorPrimaryBrush}"/>
                <TextBox Text="{Binding WorldId, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" Margin="0,2"/>

                <TextBlock Text="Width"
                           HorizontalAlignment="Right"
                           Margin="0,0,8,0"
                           Foreground="{DynamicResource TextFillColorPrimaryBrush}"/>
                <DockPanel Margin="0,2">
                    <TextBlock Text="{Binding TilesWide, StringFormat={}{0:0}}"
                               Width="40"
                               DockPanel.Dock="Right"
                               Foreground="{DynamicResource TextFillColorSecondaryBrush}"/>
                    <Slider Value="{Binding TilesWide, Mode=TwoWay}"
                            VerticalAlignment="Center"
                            Minimum="200" Maximum="8400"
                            SmallChange="200" LargeChange="600"
                            TickFrequency="200" IsSnapToTickEnabled="True"/>
                </DockPanel>

                <TextBlock Text="Height"
                           HorizontalAlignment="Right"
                           Margin="0,0,8,0"
                           Foreground="{DynamicResource TextFillColorPrimaryBrush}"/>
                <DockPanel Margin="0,2">
                    <TextBlock Text="{Binding TilesHighReactive, StringFormat={}{0:0}}"
                               Width="40"
                               DockPanel.Dock="Right"
                               Foreground="{DynamicResource TextFillColorSecondaryBrush}"/>
                    <Slider Value="{Binding TilesHigh, Mode=TwoWay}"
                            VerticalAlignment="Center"
                            Minimum="150" Maximum="2400"
                            SmallChange="150" LargeChange="450"
                            TickFrequency="150" IsSnapToTickEnabled="True"/>
                </DockPanel>

                <TextBlock Text="Surface Level"
                           HorizontalAlignment="Right"
                           Margin="0,0,8,0"
                           Foreground="{DynamicResource TextFillColorPrimaryBrush}"/>
                <DockPanel Margin="0,2">
                    <TextBlock Text="{Binding GroundLevel, StringFormat={}{0:0}}"
                               Width="40"
                               DockPanel.Dock="Right"
                               Foreground="{DynamicResource TextFillColorSecondaryBrush}"/>
                    <Slider Value="{Binding GroundLevel, Mode=TwoWay}"
                            VerticalAlignment="Center"
                            Minimum="0" Maximum="{Binding Path=MaxGroundLevel}"
                            SmallChange="1"/>
                </DockPanel>

                <TextBlock Text="Cavern Level"
                           HorizontalAlignment="Right"
                           Margin="0,0,8,0"
                           Foreground="{DynamicResource TextFillColorPrimaryBrush}"/>
                <DockPanel Margin="0,2">
                    <TextBlock Text="{Binding RockLevel, StringFormat={}{0:0}}"
                               Width="40"
                               DockPanel.Dock="Right"
                               Foreground="{DynamicResource TextFillColorSecondaryBrush}"/>
                    <Slider Value="{Binding RockLevel, Mode=TwoWay}"
                            VerticalAlignment="Center"
                            Minimum="0" Maximum="{Binding Path=MaxCavernLevel}"
                            SmallChange="1"/>
                </DockPanel>
            </tedit:AutoGrid>
        </StackPanel>

        <!-- World Generation Section (Expander) -->
        <Expander Grid.Row="2"
                  Header="World Generation"
                  Margin="8,0,8,8"
                  IsExpanded="False">
            <ScrollViewer MaxHeight="350" VerticalScrollBarVisibility="Auto">
                <StackPanel>
                <!-- Hills Section -->
                <TextBlock Text="Hills"
                           Margin="0,8,0,4"
                           FontWeight="SemiBold"
                           Foreground="{DynamicResource TextFillColorPrimaryBrush}"/>
                <tedit:AutoGrid HorizontalAlignment="Stretch">
                    <tedit:AutoGrid.ColumnDefinitions>
                        <ColumnDefinition Width="Auto"/>
                        <ColumnDefinition Width="*"/>
                    </tedit:AutoGrid.ColumnDefinitions>

                    <TextBlock Text="Hill Terrain Size"
                               HorizontalAlignment="Right"
                               Margin="0,0,8,0"
                               Foreground="{DynamicResource TextFillColorPrimaryBrush}"/>
                    <DockPanel Margin="0,2">
                        <TextBlock Text="{Binding HillSize, StringFormat={}{0:0}}"
                                   Width="40"
                                   DockPanel.Dock="Right"
                                   Foreground="{DynamicResource TextFillColorSecondaryBrush}"/>
                        <Slider Value="{Binding HillSize, Mode=TwoWay}"
                                VerticalAlignment="Center"
                                Minimum="0" Maximum="500"
                                SmallChange="1" LargeChange="10"
                                TickFrequency="1" IsSnapToTickEnabled="True"/>
                    </DockPanel>

                    <TextBlock Text="Add Grass"
                               HorizontalAlignment="Right"
                               Margin="0,0,8,0"
                               Foreground="{DynamicResource TextFillColorPrimaryBrush}"/>
                    <CheckBox IsChecked="{Binding GenerateGrass, Mode=TwoWay}" Margin="0,2"/>

                    <TextBlock Text="Add Walls"
                               HorizontalAlignment="Right"
                               Margin="0,0,8,0"
                               Foreground="{DynamicResource TextFillColorPrimaryBrush}"/>
                    <CheckBox IsChecked="{Binding GenerateWalls, Mode=TwoWay}" Margin="0,2"/>
                </tedit:AutoGrid>

                <!-- Caves Section -->
                <TextBlock Text="Caves"
                           Margin="0,12,0,4"
                           FontWeight="SemiBold"
                           Foreground="{DynamicResource TextFillColorPrimaryBrush}"/>
                <tedit:AutoGrid HorizontalAlignment="Stretch">
                    <tedit:AutoGrid.ColumnDefinitions>
                        <ColumnDefinition Width="Auto"/>
                        <ColumnDefinition Width="*"/>
                    </tedit:AutoGrid.ColumnDefinitions>

                    <TextBlock Text="Generate Caves (slow)"
                               HorizontalAlignment="Right"
                               Margin="0,0,8,0"
                               Foreground="{DynamicResource TextFillColorPrimaryBrush}"/>
                    <CheckBox IsChecked="{Binding GenerateCaves, Mode=TwoWay}" Margin="0,2"/>

                    <TextBlock Text="Cave Preset"
                               HorizontalAlignment="Right"
                               Margin="0,0,8,0"
                               Foreground="{DynamicResource TextFillColorPrimaryBrush}"/>
                    <ComboBox ItemsSource="{Binding CavePresets}"
                              SelectedIndex="{Binding CavePresetIndex, Mode=TwoWay}"
                              SelectionChanged="ComboBox_SelectionChanged"
                              Margin="0,2"/>

                    <TextBlock Text="Include Surface"
                               HorizontalAlignment="Right"
                               Margin="0,0,8,0"
                               Foreground="{DynamicResource TextFillColorPrimaryBrush}"/>
                    <CheckBox IsChecked="{Binding SurfaceCaves, Mode=TwoWay}" Margin="0,2"/>

                    <TextBlock Text="Cave Noise"
                               HorizontalAlignment="Right"
                               Margin="0,0,8,0"
                               Foreground="{DynamicResource TextFillColorPrimaryBrush}"/>
                    <DockPanel Margin="0,2">
                        <TextBlock Text="{Binding CaveNoise, StringFormat={}{0:0.00}}"
                                   Width="40"
                                   DockPanel.Dock="Right"
                                   Foreground="{DynamicResource TextFillColorSecondaryBrush}"/>
                        <Slider Value="{Binding CaveNoise, Mode=TwoWay}"
                                VerticalAlignment="Center"
                                Minimum="0.01" Maximum="0.5"
                                SmallChange="0.01" LargeChange="0.1"
                                TickFrequency="0.01" IsSnapToTickEnabled="True"/>
                    </DockPanel>

                    <TextBlock Text="Cave Multiplier"
                               HorizontalAlignment="Right"
                               Margin="0,0,8,0"
                               Foreground="{DynamicResource TextFillColorPrimaryBrush}"/>
                    <DockPanel Margin="0,2">
                        <TextBlock Text="{Binding CaveMultiplier, StringFormat={}{0:0.00}}"
                                   Width="40"
                                   DockPanel.Dock="Right"
                                   Foreground="{DynamicResource TextFillColorSecondaryBrush}"/>
                        <Slider Value="{Binding CaveMultiplier, Mode=TwoWay}"
                                VerticalAlignment="Center"
                                Minimum="0.00" Maximum="0.05"
                                SmallChange="0.01" LargeChange="0.05"
                                TickFrequency="0.01" IsSnapToTickEnabled="True"/>
                    </DockPanel>

                    <TextBlock Text="Cave Density Chance"
                               HorizontalAlignment="Right"
                               Margin="0,0,8,0"
                               Foreground="{DynamicResource TextFillColorPrimaryBrush}"/>
                    <DockPanel Margin="0,2">
                        <TextBlock Text="{Binding CaveDensity, StringFormat={}{0:0.00}}"
                                   Width="40"
                                   DockPanel.Dock="Right"
                                   Foreground="{DynamicResource TextFillColorSecondaryBrush}"/>
                        <Slider Value="{Binding CaveDensity, Mode=TwoWay}"
                                VerticalAlignment="Center"
                                Minimum="0.1" Maximum="10.0"
                                SmallChange="0.1" LargeChange="1"
                                TickFrequency="0.01" IsSnapToTickEnabled="True"/>
                    </DockPanel>
                </tedit:AutoGrid>

                <!-- Underworld Section -->
                <TextBlock Text="Underworld"
                           Margin="0,12,0,4"
                           FontWeight="SemiBold"
                           Foreground="{DynamicResource TextFillColorPrimaryBrush}"/>
                <tedit:AutoGrid HorizontalAlignment="Stretch">
                    <tedit:AutoGrid.ColumnDefinitions>
                        <ColumnDefinition Width="Auto"/>
                        <ColumnDefinition Width="*"/>
                    </tedit:AutoGrid.ColumnDefinitions>

                    <TextBlock Text="Generate Underworld"
                               HorizontalAlignment="Right"
                               Margin="0,0,8,0"
                               Foreground="{DynamicResource TextFillColorPrimaryBrush}"/>
                    <CheckBox IsChecked="{Binding GenerateUnderworld, Mode=TwoWay}" Margin="0,2"/>

                    <TextBlock Text="Add Ash"
                               HorizontalAlignment="Right"
                               Margin="0,0,8,0"
                               Foreground="{DynamicResource TextFillColorPrimaryBrush}"/>
                    <CheckBox IsChecked="{Binding GenerateAsh, Mode=TwoWay}" Margin="0,2"/>

                    <TextBlock Text="Add Lava"
                               HorizontalAlignment="Right"
                               Margin="0,0,8,0"
                               Foreground="{DynamicResource TextFillColorPrimaryBrush}"/>
                    <CheckBox IsChecked="{Binding GenerateLava, Mode=TwoWay}" Margin="0,2"/>

                    <TextBlock Text="Roof Noise"
                               HorizontalAlignment="Right"
                               Margin="0,0,8,0"
                               Foreground="{DynamicResource TextFillColorPrimaryBrush}"/>
                    <DockPanel Margin="0,2">
                        <TextBlock Text="{Binding UnderworldRoofNoise, StringFormat={}{0:0.00}}"
                                   Width="40"
                                   DockPanel.Dock="Right"
                                   Foreground="{DynamicResource TextFillColorSecondaryBrush}"/>
                        <Slider Value="{Binding UnderworldRoofNoise, Mode=TwoWay}"
                                VerticalAlignment="Center"
                                Minimum="0.01" Maximum="0.3"
                                SmallChange="0.01" LargeChange="0.1"
                                TickFrequency="0.01" IsSnapToTickEnabled="True"/>
                    </DockPanel>

                    <TextBlock Text="Floor Noise"
                               HorizontalAlignment="Right"
                               Margin="0,0,8,0"
                               Foreground="{DynamicResource TextFillColorPrimaryBrush}"/>
                    <DockPanel Margin="0,2">
                        <TextBlock Text="{Binding UnderworldFloorNoise, StringFormat={}{0:0.00}}"
                                   Width="40"
                                   DockPanel.Dock="Right"
                                   Foreground="{DynamicResource TextFillColorSecondaryBrush}"/>
                        <Slider Value="{Binding UnderworldFloorNoise, Mode=TwoWay}"
                                VerticalAlignment="Center"
                                Minimum="0.01" Maximum="0.3"
                                SmallChange="0.01" LargeChange="0.1"
                                TickFrequency="0.01" IsSnapToTickEnabled="True"/>
                    </DockPanel>

                    <TextBlock Text="Lava Noise"
                               HorizontalAlignment="Right"
                               Margin="0,0,8,0"
                               Foreground="{DynamicResource TextFillColorPrimaryBrush}"/>
                    <DockPanel Margin="0,2">
                        <TextBlock Text="{Binding UnderworldLavaNoise, StringFormat={}{0:0.00}}"
                                   Width="40"
                                   DockPanel.Dock="Right"
                                   Foreground="{DynamicResource TextFillColorSecondaryBrush}"/>
                        <Slider Value="{Binding UnderworldLavaNoise, Mode=TwoWay}"
                                VerticalAlignment="Center"
                                Minimum="0.01" Maximum="0.3"
                                SmallChange="0.01" LargeChange="0.1"
                                TickFrequency="0.01" IsSnapToTickEnabled="True"/>
                    </DockPanel>
                </tedit:AutoGrid>

                <!-- Ores Section -->
                <TextBlock Text="Ores"
                           Margin="0,12,0,4"
                           FontWeight="SemiBold"
                           Foreground="{DynamicResource TextFillColorPrimaryBrush}"/>
                <tedit:AutoGrid HorizontalAlignment="Stretch">
                    <tedit:AutoGrid.ColumnDefinitions>
                        <ColumnDefinition Width="Auto"/>
                        <ColumnDefinition Width="*"/>
                    </tedit:AutoGrid.ColumnDefinitions>

                    <TextBlock Text="Generate Ores"
                               HorizontalAlignment="Right"
                               Margin="0,0,8,0"
                               Foreground="{DynamicResource TextFillColorPrimaryBrush}"/>
                    <CheckBox IsChecked="{Binding GenerateOres, Mode=TwoWay}"
                              Content="(Launches ore-gen plugin)"
                              Margin="0,2"/>
                </tedit:AutoGrid>
            </StackPanel>
            </ScrollViewer>
        </Expander>

        <!-- Bottom Buttons -->
        <UniformGrid Grid.Row="3" Columns="2" Margin="8" Style="{DynamicResource SidebarButtonRow}">
            <ui:Button Content="Cancel"
                       Padding="8,6"
                       Margin="0,0,4,0"
                       HorizontalAlignment="Stretch"
                       Click="CancelClick"/>
            <ui:Button Content="Create World"
                       Appearance="Primary"
                       Padding="8,6"
                       Margin="4,0,0,0"
                       HorizontalAlignment="Stretch"
                       Click="OkClick"/>
        </UniformGrid>
    </Grid>
</ui:FluentWindow>
