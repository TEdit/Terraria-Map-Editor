[changelog]
header = ""
body = """
{% for group, commits in commits | group_by(attribute="group") %}
    ### {{ group | striptags | trim | upper_first }}
    {% for commit in commits %}
        - {{ commit.message | upper_first }}\
            {% if commit.remote.pr_number %} \
                ([#{{ commit.remote.pr_number }}](https://github.com/TEdit/Terraria-Map-Editor/pull/{{ commit.remote.pr_number }}))\
            {% endif %}\
    {% endfor %}
{% endfor %}
{% if github.contributors | length > 0 %}
    ### ğŸ‘¥ Contributors
    {% for contributor in github.contributors %}
        - {% if contributor.is_first_time %}ğŸŒŸ {% endif %}@{{ contributor.username }} ({{ commits | filter(attribute="remote.username", value=contributor.username) | length }} commits)
    {%- endfor %}
{% endif %}
"""
trim = true
render_always = false

[git]
conventional_commits = false
filter_unconventional = false
commit_parsers = [
    # Skip merge commits
    { message = "^Merge pull request", skip = true },
    { message = "^Merge branch", skip = true },

    # Skip WIP commits
    { message = "(?i)^WIP", skip = true },

    # Skip dependency updates
    { message = "^chore\\(deps", skip = true },
    { message = "(?i)^bump ", skip = true },

    # Categorize by common patterns
    { message = "(?i)^add", group = "<!-- 0 -->ğŸ‰ New Features" },
    { message = "(?i)^initial", group = "<!-- 0 -->ğŸ‰ New Features" },
    { message = "(?i)^implement", group = "<!-- 0 -->ğŸ‰ New Features" },
    { message = "(?i)^introduce", group = "<!-- 0 -->ğŸ‰ New Features" },

    { message = "(?i)^fix", group = "<!-- 1 -->ğŸ› Bug Fixes" },

    { message = "(?i)^enhance", group = "<!-- 2 -->âœ¨ Enhancements" },
    { message = "(?i)^improve", group = "<!-- 2 -->âœ¨ Enhancements" },
    { message = "(?i)^update", group = "<!-- 2 -->âœ¨ Enhancements" },
    { message = "(?i)^adjust", group = "<!-- 2 -->âœ¨ Enhancements" },

    { message = "(?i)^refactor", group = "<!-- 3 -->ğŸ”§ Refactoring" },
    { message = "(?i)^clean", group = "<!-- 3 -->ğŸ”§ Refactoring" },
    { message = "(?i)^remove", group = "<!-- 3 -->ğŸ”§ Refactoring" },

    { message = "(?i)^doc", group = "<!-- 4 -->ğŸ“š Documentation" },

    # Catch-all
    { message = ".*", group = "<!-- 9 -->ğŸ“¦ Other Changes" },
]
filter_commits = false
topo_order = false
sort_commits = "oldest"

[remote.github]
owner = "TEdit"
repo = "Terraria-Map-Editor"
